# 어느 날 고민 많은 주니어 개발자가 찾아왔다 2탄: 주니어 시절 설장과 고민들 - 김영한
- https://www.inflearn.com/course/lecture?courseSlug=%EC%9D%B8%ED%94%84%EC%BD%982023-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B0&unitId=177890
## 성장 기본기 - 기술과 비지니스
- 50:50으로 중요함.
- 현재 팀에서 사용하는 기술 vs 최신 유행하는 기술

## 기술
### 3종류의 개발자
- 기술 공부를 안 하는 개발자
  - 팀에서 동작하는 코드 보고 이렇게 짜면 되는구나.
  - 기술에 대한 깊은 이해 없이 개발 업무 반복.
  - 기술적인 근본 원인을 파악해서 문제 해결 어려움.
  - 팀에서 새로운 기술을 도입할 때 주저함.
  - 1년차 경험을 10번 반복하는 10년차가 된다.
  - 개발자 커리어에 치명적
- 기술 트렌드 찍먹 개발자
  - 기술 공부를 하기는 함.
  - 팀에서 사용하는 기술도 제대로 이해하지 못한 상태
  - 새로운 기술을 도입하자고 한다면? 신뢰하기 어려움.
  - 기술의 깊이가 만들어지기 어렵다.
  - 예를 들어 팀에서는 RDB를 하드하게 쓰지만 잘 몰라서 성능 이슈 터뜨리지만 요즘은 코틀린이지!
- 팀 기술을 잘 이해하는 개발자
  - 팀에서 사용하는 기술 역량을 잘 쌓아둠
  - 기술을 잘 이해해서 팀 업무를 원활하게 진행
  - 팀에 기술 문제가 발생했을 때 원인을 정확히 파악해서 해결
  - 신뢰와 기술 포인트
  - 팀에서 점점 중요한 업물르 맡게됨
  - 결과적으로 평가와 연봉에 반영

### 팀 기술 학습의 장점
- 통기부여
  - 사람은 당장 본인에게 필요한 것을 더 빠르게 학습
- 학습 사이클
  - 학습 -> 업무에 학습한 내용을 활용 -> 활용하면서 고민되는 부분 학습
  - 이론과 실습의 완벽한 조화

### 어떻게 해야하는가?
- 첫번째는 팀의 기술을 어느 정도 깊이까지 학습해야한다.
- 두번째는 업계 메인 기술을 학습해야한다.
  - 메인스트림 기술은 팀에서도 사용할 수 있고 이직할 때 사용할 수 있다.
- 주변, 최신 기술
- 범위를 점점 넓혀나간다.

### 기술을 학습한다는 것
- 기술을 업무에 사용할 줄 안다고 그 기술을 잘 아는 것은 아니다.
  - 1년차의 경험을 10번 반복 -> 정말 조심해야 한다! 
- 기술의 기본 원리를 이해하고 깊이있게 학습
- 그 기술이 왜 필요한지 이해
- 해당 기술을 사용해서 밑바닥부터 스스로 완성
- 문제가 발생했을 때 해당 기술에 대한 해결사 역할

### 경기와 훈련
- 운동 선수가 평소에 훈련하지 않는다면?
- 개발자도 꾸준한 훈련의 시간이 필요하다.
- 경기 = 회사 업무
- 훈련 = 업무 외 학습의 시간

## 비즈니스 이해
- 비즈니스를 이해하는 것이 가장 중요
- 기술에 시간을 들이는 만큼 비즈니스를 이해하기 위해 투자해야함.
- 우리가 왜 코드를 작성하는가? 비즈니스를 하기 위해서. 내 월급이 어디서 나오는가?!

### 개발자가 비즈니스를 이해한다는 것?
- 비즈니스와 개발이 어떻게 연뎔돼 있는지 이해하는 큰 지도를 그리는 것.
- 그릴 수 있냐 없냐로 회사에서 좋은 시니어 여부가 판가름남.
- 항상 백지에서 시작할 수 없음. 95%는 기존 시스템 업그레이드 하거나 메인터넌스 해야함.

### 큰 지도 만들기
- 비지니스 이해
  - 인터뷰: 비지니스에 대해서 듣고 이해해라, 기획자, 팀장, 문서 등등
  - 어드민의 기능 하나하나 다 사용하기 + 사용자의 기능 사용해보기
- 비지니스 구현 이해
  - 데이터: 핵심 테이블(엔티티), 핵심 필드 정리
    - ERD 등을 정리
    - 예를 들어 주문 시스템이면 주문 상태
  - 핵심 업무 프로세스 정리
    - 예를 들어 주문이 들어오면 어떤 컴포넌트들을 호출하는지 흐름 그리고 핵심 데이터가 어떤 테이블에 들어가는지 전체적인 프로세스 정리
    - 본인이 이해할 수 있는 쉬운 기준으로

### 2종류의 개발자
- 비즈니스 이해가 약한 개발자
  - 큰 그림에서 전체 상황을 이해하지 못함.
  - 지도가 없으므로 어디까지 질문해야 할지를 잘 모름.
  - 작업의 영향 범위가 어디까지 영향을 미치는지 파악이 어려움.
  - 요구사항을 제대로 처리하지 못함.
  - 중요한 메인 업무가 있을 때, 영향 범위를 잘 모르기 때문에 실패할 가능성이 높음.
  - 더 큰 업무를 맡기기는 어려움 (팀의 서브 업무)
- 비즈니스를 잘 이해한 개발자
  - 지도가 있으므로 어디까지 질문해야 할지를 잘 이해
  - 시간이 지날수록 전체 그림에 살을 붙여서 비즈니스와 아키텍처에 대한 이해도가 높아짐
  - 큰 변경사항이 있어도 영향 범위가 어디까지 미치는지 이해
  - 큰 그림으로 전체 상황을 이해하기 때문에 영향도 이해, 아키텍처 변경도 가능
  - 조직에서도 더 큰 업무를 맡김 (팀의 메인 업무)
  - 도전적인 업무 가능

### 좋은 시스템을 설계하려면?
- 개발을 잘 하기 위해서는 비즈니스 이해가 필수
- 비즈니스를 이해해야 좋은 아키텍처 설계 가능
  - 아키텍처 설계는 트레이드 오프
- 애플리케이션 아키텍처의 선택은 변경 가능성의 영향이 큼
- 그런데 이게 변할지 안 변할지 선택이 필요 - 비즈니스를 알아야 가능
- 예를 들면 모 개발자(영한님 ㅎㅎ)의 스프링 강의 보고 DI 좋다드라 하고 다 추상화하고 인터페이스 도배하면 변하지 않는 곳에 과도한 추상화 적용해 의존성은 줄어들지만 모호함 증가함. 구현체 어떤 거 쓰는 건지 다 찾아야함... 추상화도 비용임.

## 성장 부스팅 - 용기, WHY
### 약간의 용기
- 팀의 기술과 비지니스를 이해하는데는 3 ~ 6개월 정도 걸림.
- 이후에는 용기를 내서 중요한 일에 도전해야함.
- 영한님이 실장일 때 포텐셜 + 열정있는 주니어 뽑아서 팀에 꽂음. 근데 자꾸 어드민이나 간단한 거만 진행함.
- 왜 그런지 봤더니 다른 열정맨 + 도전맨들이 중요한 거 다 가져가더라. 부끄러워서 남은 거만 하게 됨.
- 나중에 열정맨 + 도전맨한테 배워서 바껴서 중요한 거 하기 시작함.
- 승진도 하고 메인 개발자도 하고 있음.

### 언제 성장하는가?
- comport zone을 벗어나 fear zone, learning zone, growth zone으로 나가야 함.
- 업무가 완전 바뀌는데도 무덤덤하게 하는 사람들이 잘 하더라.

### 용기 - 기술, 비즈니스 기반
- 기술 역량 필요
  - 팀에서 성능이 안 나온다. 캐시를 도입해야겠다.
  - 중복을 AOP 적용해서 해결해야겠다.
  - 프로토타입을 빠르게 만들어서 증명
- 비즈니스 이해 필요
  - 메인의 중요한 업무 담당하겠다.

## WHY - 왜?
- 삶에서 가장 중요함.
- 근본적인 이유를 알아야 본질적인 답을 찾을 수 있다.
- 기술이든 비즈니스든, 근본적인 이유를 알아야 올바른 대안을 찾을 수 있다.
- 가장 안 좋은 건 위에서 시켜서 하는 것임.
  
### WHY
- 동기부여
  - 어떤 비즈니스, 기술적 가치를 만들어 낼지를 알아야 동기부여가 됨.
  - 요즘에는 진짜 중요함.
- 기술역량성장
  - 기술적으로 왜 이렇게 해야하는지를 고민을 해야 자기만의 기준이 쌓임.
  - 왜 이 기술을 도입하고 이 코드를 짜야하는지 고민하다 보면 그게 쌓여서 실력이 됨.
  - 아무 생각 없이 짜면 성장으로 반영이 되지 않음.
  - 더 나은 기술과 비교하거나 A, B중 고민하다가 트레이드 오프도 알게 됨.
  - 질문과 고민이 없으면 성장도 없다!!
- 제대로 된 비즈니스 이해
- 제대로 된 기술 검증
  - 기술이 왜 필요한지 의문을 제기하고 파봐야 함.

### WHY - 커뮤니케이션
- 공격 조심
  - 기획자가 열심히 써와서 보여줬는데 이상한게 있다고 '왜 이렇게 해야돼요?'하면 순수한 궁금증일지라도 '왜 이따구로 해요?'로 들린다 ㅋㅋ;
  - 이렇게 물어보면 상대방은 바로 방어적으로 나온다...
  - 코드 리뷰할 때 '왜 이렇게 짰어요?'라고 순수하게 질문해도 '왜 이렇게 이상하게 짰어요?'로 들림..
- 기획자에게
- 개발자에게

### 고민이 있습니다
- 대전제가 존중하지 않는 사람한테 이 말을 하지 않음.
- 기획에 구멍이 있더라도 이런 이런 부분이 고민이고 잘 이해를 못하겠다고 하면 기획자 입장에서 마음이 열림.
- 코드 작성 안 해도 될 것 같은데 하면 기획자 분이 덥썩 물으신다(?)

### WHY - 내가 리더라면?
- 리더는 100번 질문해도 100번 대답할 준비가 돼있어야 한다.
  - 팀장님이 이해 못 한다고 짜증내면 90%는 팀장님이 설명을 못한 것임.
  - 뽑을 때 이미 필터링이 됐는데 이해를 못한 거니까.
- 왜 이 일을 해야 하는지 잘 풀어서 설명
- 팀장만 리더가 이나다. 모두가 리더다.
- 기술, 비즈니스 모두

### 마무리
- 끊임 없이 고민하고 항상 왜?라는 근본 질문을 해라
- 좋은 시니어는 깊이가 있는 사람임.
- 결국 왜라는 고민을 하면서 고민이 쌓여서 깊이가 만들어짐.

## 주니어 시절 자주하는 고민들
- 내가 성장하기 좋은 환경은?
  - 좋은 환경
    - 지금 좋다기 보다는 일하기 좋은 방향으로 바꾸어 나가려고 노력하는 조직, 고민하고 도전할 때 응원해주는 조직.
    - 굳어지면 엔지니어들이 도전하기 힘듦.
  - 안 좋은 환경
  - 본인의 힘만으로는 극복 힘듦
  - 씨앗이 콘크리트나 모래에서는 자라기 힘들지만 흙밭에서는 잘 성장할 수 있음.
- 저는 고민을 많이해서 개발 속도가 안나요
  - 고민을 하는 사람들이 나중에 잘 된다. 공부를 많이 하는 친구들
  - 개발 구조
    - 고민은 많이 하되 항상 최대한 단순하게 시작해라.
    - 구체적인 걸 해야 더 좋은 추상화가 보이고 추상화를 해야 더 좋은 구체적인 그림이 보일 때가 많음.
  - 최적화
    - 진짜 조심해야 한다.
    - 어설픈 최적화가 유지보수 비용 폭발적으로 증가함. 개발 생산성 저하시킴.
    - 항상 단순하게.
    - 제일 좋은 건 최적화하지 말고 필요에 의해서 시작해라. 
  - 아키텍처
    - 최대한 단순하게 시작해라.
    - DB 조인으로 하면 1분이면 끝나는데 MSA로 하는 순간 수십배.
- 조급한 마음 거북이 마음
  - 멀티태스킹
    - 인간의 CPU는 하나, 컨텐스트 스위칭 비용은 매우 큼.
    - 번잡하게 하면 점진하는 느낌이 안 듦. 이 느낌이 들어야 즐거움.ㄴ
  - 거북이 마음
    - 한 번에 하나씩 처리
    - 속도 != 깊이
      - 굉장히 잘 하면 속도 빠르게 해도 괜찮지만 대부분은 아님.
      - 학습을 할 때는 여러 이해와 연결이 필요함.
      - 속도 빨리 돌려도 남는 게 없음.

# 인프런 아키텍처 2023 ~ 2024
- https://www.inflearn.com/course/lecture?courseSlug=%EC%9D%B8%ED%94%84%EC%BD%982023-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B0&unitId=177907

## 2022년 인프런 아키텍처 리뷰
- 여러 직군이 있는 목적 조직과 같은 직군이 있는 기능 조직으로 나눔.
- 그런데 기능 추가는 거대한 단일 레거시 시스템에 모든 조직이 하게 됨.
- 빌드 속도 늘어나고 커밋 꼬이고 QA 일정 잡기 너무 어려워짐.
- 거대한 단일 레거시 시스템의 개편은 어느 조직 목표인가? -> 회색 지대
  - 각 목적 조직은 자기 서비스 개선이 목표임.
  - 레거시에 대한 근본적 개선(5 ~ 6개월 걸리는)은 목적 조직의 목표가 아니게 됨.

## 복잡한 문제를 쉽게 해결하기
- 마이크로 서비스 아키텍처는 소규모 팀이 비즈니스 속도를 낼 수 없음.
- 복잡한 문제를 해결 하는 방법: Divide and Conquer (분할 정복)
- 거대한 시스템(레거시)을 복제하여 작은 시스템 여러개로 분할하자.
- 인프랩의 경우 기존 레거시에 있던 질문, 회원, 강의 등등을 각 목적 조직마다 복제하고 담당하는 기능 빼고 삭제해라.
- 조직별로 레거시 시스템이 만들어짐.
- 각 목적 조직은 작은 레거시 + 새로운 시스템 조합을 가져가게 됨.
- 목적 조직마다 레거시와 신규 스택 갖게 됨. 회색 지대 없음.
  - 줄어든 코드만큼 개선된 빌드 속도
  - 프로젝트별로 관리되는 Commit 로그
  - 독립된 프로젝트에서 격리된 QA
- 레거시 개편 == 목적 조직의 목표
- 미래의 비즈니스 속도 개선을 위한 레거시 개편과 현재의 성과를 위한 비즈니스 구현
- PM, PD, Dev가 함께 검토하기 시작함.

## 구체적 문제와 해결책
### N배로 증설해야할 인프라
- 1개의 서비스를 N개의 프로젝트로 분할 -> N배로 증설해야할 인프라
- 코드 복제뿐만 아니라 인프라 계층 전체의 복제가 필요
- IaC를 사용하게 됨.
- IaC로 레거시 인프라를 언제든 쉽고, 빠르고, 동일하게 복제 가능한 인프라 환경 구성

### 1개의 URL Domain N개의 프로젝트
- 1개의 서비스 -> N개의 프로젝트로 분할 -> 1개의 URL Domain N개의 프로젝트
- CloudFront에서 Path에 맞춰 프로젝트 분기
- Load Balancer VS Cloud Front
  - Load Balancer가 지원하지 않는 다양한 서비스로 라우팅 가능 (S3, API Gateway 등)
- 계속해서 URL Path 단위로 변화가 필요하기 때문에 단일 EndPoint를 사용하는 GraphQL을 지금 도입할 수 없음.

### N개의 프로젝트로 분할 
- N개의 프로젝트로 분할 -> 내부 API 통신이 많아짐.
- DB 쿼리가 아닌 API 호출이 필요해짐.
- 서비스끼리 통신할 때도 Public IP를 사용한 인터넷 통신이 많아짐.
- 외부 DNS를 거쳐가야 하는 네트워크 리소스
- 외부의 트래픽으로 계산되는 트래픽 비용
- 사내 와이파이, VPN 기반의 내부망 구성의 어려움.
- Public (VPC) Load Balancer + Private (VPC) Load Balancer
- 외부 DNS를 거치지 않음 -> 네트워크 리소스 감소, 트래픽 비용 감소, 내부망 구성이 쉬워짐.
- 1개의 사용자 요청 N개의 내부 API 통신.
- 각 서비스마다 담당하는 기능이 다른데 모든 API가 성공해야했음.
- 예를 들어 영상 API가 강의, 학습자 API에 요청하고 자신이 DB에 갱신했으면 모두 성공했어야 했음.
- 다른 API를 호출해야한다는 걸 알아야 함.
- API중 하나라도 실패하면 어떻게 할 것인가?
- 모든 API가 성공할 때까지 대기시간은 어떻게 할 것인가?
- SNS-SQS 비동기 아키텍처
- 영상 API가 진도율 갱신 이벤트를 SNS에 전달하면 SQS가 컨숨해서 각 API에 알려줌.
- SNS 이벤트 발행만 하면 되는 도메인 의존성 분리
- SQS를 통해 각각의 프로젝트가 최종적 일관성 보장
- 각 API의 결과를 기다릴 필요가 없음.
- 하지만 트랜잭션이 필요할 때는 사용하지 않음. 이럴 때는 DB 사용함.
- 단일 DB의 장점을 살려 트랜잭션이 중요하면 연관 테이블에 직접 SQL 실행.

### 단일 DB의 문제점
- N개의 프로젝트 1개의 데이터베이스
- 테이블 변경 사항에 대한 전체 조직 Sync
- 문제가 되는 SQL 출처 파악
- 중복된 도메인 클래스 관리
- 멀티 DB, 분산 DB 사용하지 않고자 함. DB 동기화가 더 힘듦.
- 모든 DDL에 대해 단일 채널 알람
- 프로젝트마다 다른 DB 계정 사용 -> 문제 프로젝트 추적 용이
- 모든 프로젝트가 공통 레포의 코드를 사용하면 각자가 원하는 로직이 다 여기 있음. 너무나 거대해져 리팩토링 불가능해짐.
- 차라리 중복 도메인 클래스 관리하자. 조직이 필요한 로직만 관리하자.
- 거대한 하나의 도메인 클래스 보다는 각 조직마다 최소한의 로직만 있는 중복된 개별 도메인 클래스를 사용한다.
- 불확실한 미래에는 어설픈 추상화/공통화 보다는 삭제하기 쉬운 중복이 낫다.
- 도메인에 종송적이지 않은 공통 유틸 클래스, 함수들은 깃허브 레지스트로 관리한다.

## 다음 개선점
- 이메일, 문자, 카카오톡 발송 등 비즈니스에 독립적인 플랫폼 성격의 API -> 데브옵스 조직이 Go를 이용함.
- 인증, 권한을 한 곳에서 관리할 수 있는 최소 스펙의 API Gateway
- EndPoint 공유 방지를 위한 public LB와 private LB에 적합한 형태의 모노레포 구성

## 마무리
- 트래픽, 장애가 아니라 비즈니스 속도를 위한 조직 개편으로 아키텍처가 개편된 사례
- 소프트웨어 구조는 해당 소프트웨어를 개발한 조직의 커뮤니케이션 구조를 닮게 된다.
