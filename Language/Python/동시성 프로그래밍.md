## I/O 바운드, CPU 바운드, blocking
- I/O 바운드는 I/O에 의해 프로그램이 대기하는 것이고 CPU 바운드는 CPU에 의해 대기하는 것이다.
- blocking은 바운드에 의해 코드가 멈추는 것이다. 반대가 non-blocking이다.

## 동기, 비동기
- 동기: 작성된 순서 그대로 실행.
- 비동기: 작성된 순서 그대로 실행되지 않을 수 있음.

## 파이썬 코루틴
### 메인 루틴
- 프로그램의 메인 코드

### 서브 루틴
- 메인 루틴을 보조하는 함수나 메서드
- 하나의 진입점과 탈출점이 있는 루틴

### 코루틴
- 서브 루틴의 일반화된 형태
- 일반 함수(서브 루틴)는 진입점과 탈출점이 하나인데 비해 코루틴은 진입점과 탈출점이 다양하다.
- `await`으로 중간에 함수 흐름에서 벗어날 수 있다.
- 벗어난 후 다시 돌아왔을 때 `await` 다음부터 실행한다.
- 코루틴 함수로 비동기적 함수를 작성할 수 있다.
- `await`은 `async` 내부에서 사용돼야한다.
- `with` 내에서 `await`이 쓰이면 `with`에도 `async`를 붙여줘야 된다.
  ```python
  async with session.get(url) as response:
      return await response.text()
  ```

### awaitable
- `await` 표현식에서 사용될 수 있을 때 awaitable 객체라고 한다.
- awaitable 객체에는 코루틴, 태스크, 퓨처가 있다.
- task: 코루틴을 동시에 예약하는 데 사용된다.

### 주요 함수
- `async.run`: 코루틴을 실행하고 결과를 반환하는 함수
- `async.gather`: 코루틴을 시퀀스로 전달해주면 코루틴들이 concurrent하게 작동한다.

## 동시성과 병렬성
- 동시성과 병렬성은 서로 배타적인 개념이 아니라 공존할 수 있는 개념이다.
- 하지만 파이썬에서는 GIL 때문에 멀티 스레드가 병렬적으로 수행될 수 없다.
- cpu를 많이 사용해야하는 작업에서는 동시성을 쓸 이유가 없다. 오히려 병렬성을 이용해야한다.
  - 예를 들면 1부터 1억까지 다 더해야하는 작업

### 동시성
- **스위칭**이 핵심
- 동시성은 논리적 개념으로 멀티 스레딩에서 사용되기도 하고 싱글 스레드에서 사용되기도 한다.
- 싱글 코어 뿐만 아니라 멀티 코어에서도 각각의 코어가 동시성을 사용할 수 있다.
- asyncio(코루틴) -> 싱글 스레드 동시성 프로그래밍

### 병렬성
- 병렬성은 물리적 개념으로 멀티코어에서 여러 작업을 병렬적으로 수행한다.
- at the same time의 의미
- 멀티 스레딩, 멀티 프로세싱
- 멀티 코어, 멀티 스레드에서만 가능하다.

## 파이썬 멀티 프로세싱, GIL
- 멀티 쓰레딩의 장점이자 단점이 메모리를 공유한다는 것이다.
- 여러 쓰레드의 충돌을 해결하고자 파이썬은 GIL을 도입했다.
- 파이썬 멀티 스레딩은 동시성을 사용해 io bound 코드에서 유용하게 사용할 수 있지만 cpu bound 코드에서는 GIL에 의해 원하는 결과를 얻을 수 없다.
- 멀티 프로세싱은 멀티 스레딩의 단점을 보완하지만 메모리 공유가 힘들고 리소스를 더 많이 사용한다.

### GIL
- 한 순간에 1개의 스레드만 유지하는 락
- 한 스레드가 다른 스레드를 차단해서 제어를 얻는 것을 막아준다.
